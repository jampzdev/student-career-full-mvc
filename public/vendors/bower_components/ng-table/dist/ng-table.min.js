/*! ngTable v0.8.3 by Vitalii Savchuk(esvit666@gmail.com) - https://github.com/esvit/ng-table - New BSD License */

!function(t,e){"use strict";if("function"!=typeof define||!define.amd)return e(t);define(["angular"],function(t){return e(t)})}(window.angular||null,function(t){"use strict";var e=t.module("ngTable",[]);return function(){function e(e){var n={};return n=a("pagesChanged",n=a("datasetChanged",n=a("afterReloadData",n=a("afterCreated",n))));function a(n,a){var r,i,l=n.charAt(0).toUpperCase()+n.substring(1),o={};return o["on"+l]=(r=n,function(n){var a=t.identity,i=e;if(2===arguments.length?t.isFunction(arguments[1].$new)?i=arguments[1]:a=arguments[1]:arguments.length>2&&(i=arguments[1],a=arguments[2]),t.isObject(a)){var l=a;a=function(t){return t===l}}return i.$on("ngTable:"+r,function(t,e){if(!e.isNullInstance){var r,i,l=(r=arguments,i=2,Array.prototype.slice.call(r,null==i?1:i)),o=[e].concat(l);a.apply(this,o)&&n.apply(this,o)}})}),o["publish"+l]=(i=n,function(){var t=["ngTable:"+i].concat(Array.prototype.slice.call(arguments));e.$broadcast.apply(e,t)}),t.extend(a,o)}}t.module("ngTable").factory("ngTableEventsChannel",e),e.$inject=["$rootScope"]}(),function(){function e(){var e,n={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}};function a(){e=n}function r(){var n,a={config:n,getTemplateUrl:function(t,e){if(-1!==t.indexOf("/"))return t;return a.getUrlForAlias(t,e)},getUrlForAlias:function(t){return e.aliasUrls[t]||e.defaultBaseUrl+t+e.defaultExt}};return Object.defineProperty(a,"config",{get:function(){return n=n||t.copy(e)},enumerable:!0}),a}this.$get=r,this.resetConfigs=a,this.setConfig=function(n){var a=t.extend({},e,n);a.aliasUrls=t.extend({},e.aliasUrls,n.aliasUrls),e=a},a(),r.$inject=[]}t.module("ngTable").provider("ngTableFilterConfig",e),e.$inject=[]}(),function(){function e(){var t=this;function e(e){return function(n,a){if(null==n)return[];var r=a.hasFilter()?e(t.filterFilterName)(n,a.filter(!0)):n,i=a.orderBy(),l=i.length?e(t.sortingFilterName)(r,i):r,o=l.slice((a.page()-1)*a.count(),a.page()*a.count());return a.total(l.length),o}}t.$get=e,t.filterFilterName="filter",t.sortingFilterName="orderBy",e.$inject=["$filter"]}t.module("ngTable").provider("ngTableDefaultGetData",e),e.$inject=[]}(),function(){function e(t){return function(e){return function(){var n=t.defer(),a=e.apply(this,[n].concat(Array.prototype.slice.call(arguments)));return a||(a=n.promise),a}}}t.module("ngTable").factory("ngTableGetDataBcShim",e),e.$inject=["$q"]}(),e.value("ngTableDefaults",{params:{},settings:{}}),e.factory("NgTableParams",["$q","$log","ngTableDefaults","ngTableGetDataBcShim","ngTableDefaultGetData","ngTableEventsChannel",function(e,n,a,r,i,l){var o=function(t){return!isNaN(parseFloat(t))&&isFinite(t)};return function(s,c){"boolean"==typeof s&&(this.isNullInstance=!0);var u,g,p=this,f=!1,d=function(){$.debugMode&&n.debug&&n.debug.apply(this,arguments)};function h(){var t=$.getDataFnAdaptor($.getData);return e.when(t.call($,p))}function m(){var t=$.getGroupsFnAdaptor($.getGroups);return e.when(t.call($,$.groupBy,p))}function b(t){return($.interceptors||[]).reduce(function(t,n){var a=n.response&&n.response.bind(n)||e.when,r=n.responseError&&n.responseError.bind(n)||e.reject;return t.then(function(t){return a(t,p)},function(t){return r(t,p)})},t())}this.data=[],this.parameters=function(e,n){if(n=n||!1,t.isDefined(e)){for(var a in e){var r=e[a];if(n&&a.indexOf("[")>=0){for(var i=a.split(/\[(.*)\]/).reverse(),l="",s=0,c=i.length;s<c;s++){var u=i[s];if(""!==u){var g=r;(r={})[l=u]=o(g)?parseFloat(g):g}}"sorting"===l&&(v[l]={}),v[l]=t.extend(v[l]||{},r[l])}else v[a]=o(e[a])?parseFloat(e[a]):e[a]}return d("ngTable: set parameters",v),this}return v},this.settings=function(e){if(t.isDefined(e)){t.isArray(e.data)&&(e.total=e.data.length),e.getData&&e.getData.length>1&&(e.getDataFnAdaptor=r),e.getGroups&&e.getGroups.length>2&&(e.getGroupsFnAdaptor=r);var n=$.data;return $=t.extend($,e),e.hasOwnProperty("data")&&e.data!=n&&(f&&this.page(1),f=!1,l.publishDatasetChanged(this,e.data,n)),d("ngTable: set settings",$),this}return $},this.page=function(e){return t.isDefined(e)?this.parameters({page:e}):v.page},this.total=function(e){return t.isDefined(e)?this.settings({total:e}):$.total},this.count=function(e){return t.isDefined(e)?this.parameters({count:e,page:1}):v.count},this.filter=function(e){if(t.isDefined(e)&&t.isObject(e))return this.parameters({filter:e,page:1});if(!0===e){for(var n=Object.keys(v.filter),a={},r=0;r<n.length;r++){var i=v.filter[n[r]];null!=i&&""!==i&&(a[n[r]]=i)}return a}return v.filter},this.sorting=function(e){if(2==arguments.length){var n={};return n[e]=arguments[1],this.parameters({sorting:n}),this}return t.isDefined(e)?this.parameters({sorting:e}):v.sorting},this.isSortBy=function(e,n){return void 0!==n?t.isDefined(v.sorting[e])&&v.sorting[e]==n:t.isDefined(v.sorting[e])},this.orderBy=function(){var t=[];for(var e in v.sorting)t.push(("asc"===v.sorting[e]?"+":"-")+e);return t},this.getData=function(t){return i(this.data,t)},this.getGroups=function(e){return h().then(function(n){var a={};t.forEach(n,function(n){var r=t.isFunction(e)?e(n):n[e];a[r]=a[r]||{data:[]},a[r].value=r,a[r].data.push(n)});var r=[];for(var i in a)r.push(a[i]);return d("ngTable: refresh groups",r),r})},this.generatePagesArray=function(t,e,n,a){var r,i,l,o,s;if(arguments.length||(t=this.page(),e=this.total(),n=this.count()),a=a&&a<6?6:a,s=[],(o=Math.ceil(e/n))>1){s.push({type:"prev",number:Math.max(1,t-1),active:t>1}),s.push({type:"first",number:1,active:t>1,current:1===t}),i=Math.round(($.paginationMaxBlocks-$.paginationMinBlocks)/2),l=Math.max(2,t-i),r=Math.min(o-1,t+2*i-(t-l));for(var c=l=Math.max(2,l-(2*i-(r-l)));c<=r;)c===l&&2!==c||c===r&&c!==o-1?s.push({type:"more",active:!1}):s.push({type:"page",number:c,active:t!==c,current:t===c}),c++;s.push({type:"last",number:o,active:t!==o,current:t===o}),s.push({type:"next",number:Math.min(o,t+1),active:t<o})}return s},this.isDataReloadRequired=function(){return!f||!t.equals(v,u)},this.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},this.hasFilterChanges=function(){return!t.equals(v&&v.filter,u&&u.filter)},this.url=function(e){var n=(e=e||!1)?[]:{};for(var a in v)if(v.hasOwnProperty(a)){var r=v[a],i=encodeURIComponent(a);if("object"==typeof r){for(var l in r)if(!t.isUndefined(r[l])&&""!==r[l]){var o=i+"["+encodeURIComponent(l)+"]";e?n.push(o+"="+r[l]):n[o]=r[l]}}else t.isFunction(r)||t.isUndefined(r)||""===r||(e?n.push(i+"="+encodeURIComponent(r)):n[i]=encodeURIComponent(r))}return n},this.reload=function(){var n=this,a=null;$.$loading=!0,u=t.copy(v),f=!0,a=$.groupBy?b(m):b(h),d("ngTable: reload data");var r=n.data;return a.then(function(t){return $.$loading=!1,n.data=t,l.publishAfterReloadData(n,t,r),n.reloadPages(),$.$scope&&$.$scope.$emit("ngTableAfterReloadData"),t}).catch(function(t){return u=null,f=!1,e.reject(t)})},this.reloadPages=function(){var e=g,n=p.generatePagesArray(p.page(),p.total(),p.count());t.equals(e,n)||(g=n,l.publishPagesChanged(this,n,e))};var v={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null};t.extend(v,a.params);var $={$scope:null,$loading:!1,data:null,total:0,defaultSort:"desc",filterDelay:750,counts:[10,25,50,100],interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span",getDataFnAdaptor:t.identity,getGroupsFnAdaptor:t.identity,getGroups:this.getGroups,getData:this.getData};return this.settings(a.settings),this.settings(c),this.parameters(s,!0),l.publishAfterCreated(this),this}}]),e.factory("ngTableParams",["NgTableParams",function(t){return t}]),function(){function e(t,e){t.config=e}t.module("ngTable").controller("ngTableFilterRowController",e),e.$inject=["$scope","ngTableFilterConfig"]}(),function(){function e(t){t.sortBy=function(e,n){var a=e.sortable&&e.sortable();if(!a)return;var r=t.params.settings().defaultSort,i="asc"===r?"desc":"asc",l=t.params.sorting()&&t.params.sorting()[a]&&t.params.sorting()[a]===r,o=n.ctrlKey||n.metaKey?t.params.sorting():{};o[a]=l?i:r,t.params.parameters({sorting:o})}}t.module("ngTable").controller("ngTableSorterRowController",e),e.$inject=["$scope"]}(),e.controller("ngTableController",["$scope","NgTableParams","$timeout","$parse","$compile","$attrs","$element","ngTableColumn","ngTableEventsChannel",function(e,n,a,r,i,l,o,s,c){e.$filterRow={},e.$loading=!1,e.hasOwnProperty("params")||(e.params=new n(!0)),e.params.settings().$scope=e;var u,g=(u=0,function(t,e){a.cancel(u),u=a(t,e)});e.$watch("params",function(t,e){t!==e&&t&&t.reload()},!1),e.$watch("params.isDataReloadRequired()",function(t){if(t){e.params.settings().$scope=e;var n=e.params;if(n.hasFilterChanges()){var a=function(){n.page(1),n.reload()};n.settings().filterDelay?g(a,n.settings().filterDelay):a()}else n.reload()}}),this.compileDirectiveTemplates=function(){if(!o.hasClass("ng-table")){e.templates={header:l.templateHeader?l.templateHeader:"ng-table/headers.html",pagination:l.templatePagination?l.templatePagination:"ng-table/pager.html"},o.addClass("ng-table");var n=null,a=!1;t.forEach(o.children(),function(t){"THEAD"===t.tagName&&(a=!0)}),a||(n=t.element(document.createElement("thead")).attr("ng-include","templates.header"),o.prepend(n));var r=t.element(document.createElement("div")).attr({"ng-table-pagination":"params","template-url":"templates.pagination"});o.parent().hasClass("table-alt-pagination")?o.closest(".table-alt-pagination").after(r):(console.log(o.parent().innerWidth()),console.log(o.innerWidth()),console.log(o.children().first().children().children().length),o.parent().after(r)),o.children().first().children().children().length>20&&(console.log("addClass"),o.parent().addClass("w-100")),n&&i(n)(e),i(r)(e)}},this.loadFilterData=function(n){t.forEach(n,function(n){var a;if(a=n.filterData(e,{$column:n}))return t.isObject(a)&&t.isObject(a.promise)?(delete n.filterData,a.promise.then(function(e){t.isArray(e)||t.isFunction(e)||t.isObject(e)?t.isArray(e)&&e.unshift({title:"",id:""}):e=[],n.data=e})):n.data=a;delete n.filterData})},this.buildColumns=function(t){return t.map(function(t){return s.buildColumn(t,e)})},this.parseNgTableDynamicExpr=function(t){if(!t||t.indexOf(" with ")>-1){var e=t.split(/\s+with\s+/);return{tableParams:e[0],columns:e[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},this.setupBindingsToInternalScope=function(n){var a=r(n);e.$watch(a,function(n){t.isUndefined(n)||(e.paramsModel=a,e.params=n)},!1),l.showFilter&&e.$parent.$watch(l.showFilter,function(t){e.show_filter=t}),l.disableFilter&&e.$parent.$watch(l.disableFilter,function(t){e.$filterRow.disabled=t})},function(){function t(t){return e.params===t}c.onAfterReloadData(function(t,n){t.settings().groupBy?e.$groups=n:e.$data=n},e,t),c.onPagesChanged(function(t,n){e.pages=n},e,t)}()}]),e.factory("ngTableColumn",[function(){var e={class:function(){return""},filter:function(){return!1},filterData:t.noop,headerTemplateURL:function(){return!1},headerTitle:function(){return""},sortable:function(){return!1},show:function(){return!0},title:function(){return""},titleAlt:function(){return""}};return{buildColumn:function(n,a){var r=Object.create(n);for(var i in e)void 0===r[i]&&(r[i]=e[i]),t.isFunction(r[i])||function(t){r[t]=function(){return n[t]}}(i),function(t){var e=r[t];r[t]=function(){return 0===arguments.length?e.call(n,a):e.apply(n,arguments)}}(i);return r}}}]),e.directive("ngTable",["$q","$parse",function(e,n){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var a=[],r=0,i=null;if(t.forEach(t.element(e.find("tr")),function(e){(e=t.element(e)).hasClass("ng-table-group")||i||(i=e)}),i)return t.forEach(i.find("td"),function(e){var i=t.element(e);if(!i.attr("ignore-cell")||"true"!==i.attr("ignore-cell")){var l=function(t){return i.attr("x-data-"+t)||i.attr("data-"+t)||i.attr(t)},o=function(e){var r=l(e);if(r)return function(e,i){return n(r)(e,t.extend(i||{},{$columns:a}))}},s=l("title-alt")||l("title");s&&i.attr("data-title-text","{{"+s+"}}"),a.push({id:r++,title:o("title"),titleAlt:o("title-alt"),headerTitle:o("header-title"),sortable:o("sortable"),class:o("header-class"),filter:o("filter"),headerTemplateURL:o("header"),filterData:o("filter-data"),show:i.attr("ng-if")?function(t){return n(i.attr("ng-if"))(t)}:void 0})}}),function(t,e,n,r){t.$columns=a=r.buildColumns(a),r.setupBindingsToInternalScope(n.ngTable),r.loadFilterData(a),r.compileDirectiveTemplates()}}}}]),e.directive("ngTableDynamic",["$parse",function(e){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var n;if(t.forEach(t.element(e.find("tr")),function(e){(e=t.element(e)).hasClass("ng-table-group")||n||(n=e)}),n)return t.forEach(n.find("td"),function(e){var n,a=t.element(e);(n="title",a.attr("x-data-"+n)||a.attr("data-"+n)||a.attr(n))||a.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}"),a.attr("ng-if")||a.attr("ng-if","$columns[$index].show(this)")}),function(t,e,n,a){var r=a.parseNgTableDynamicExpr(n.ngTableDynamic);a.setupBindingsToInternalScope(r.tableParams),a.compileDirectiveTemplates(),t.$watchCollection(r.columns,function(e){t.$columns=a.buildColumns(e),a.loadFilterData(t.$columns)})}}}}]),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"ng-table/filterRow.html",scope:!0,controller:"ngTableFilterRowController"}}t.module("ngTable").directive("ngTableFilterRow",e),e.$inject=[]}(),function(){function e(){return{restrict:"E",replace:!0,templateUrl:"ng-table/sorterRow.html",scope:!0,controller:"ngTableSorterRowController"}}t.module("ngTable").directive("ngTableSorterRow",e),e.$inject=[]}(),e.directive("ngTablePagination",["$compile","ngTableEventsChannel",function(e,n){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(a,r){n.onAfterReloadData(function(t){a.pages=t.generatePagesArray()},a,function(t){return t===a.params}),a.$watch("templateUrl",function(n){if(!t.isUndefined(n)){var i=t.element(document.createElement("div"));i.attr({"ng-include":"templateUrl"}),r.append(i),e(i)(a)}})}}}]),t.module("ngTable").run(["$templateCache",function(t){t.put("ng-table/filterRow.html",'<tr ng-show="show_filter" class="ng-table-filters"> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if="$column.show(this)" class="filter"> <div ng-repeat="(name, filter) in $column.filter(this)"> <div ng-include="config.getTemplateUrl(filter)"></div> </div> </th> </tr> '),t.put("ng-table/filters/number.html",'<input type="number" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control"/> '),t.put("ng-table/filters/select-multiple.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" multiple ng-multiple="true" ng-model="params.filter()[name]" class="filter filter-select-multiple form-control" name="{{name}}"> </select> '),t.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in $column.data" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="filter filter-select form-control" name="{{name}}"> <option style="display:none" value=""></option> </select> '),t.put("ng-table/filters/text.html",'<input type="text" name="{{name}}" ng-disabled="$filterRow.disabled" ng-model="params.filter()[name]" class="input-filter form-control"/> '),t.put("ng-table/headers.html","<ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> "),t.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager" ng-if="params.data.length"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"></span> </button> </div> <ul class="pagination ng-table-pagination"> <li ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;</a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;</a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"></span></a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;</a> </li> </ul> </div> '),t.put("ng-table/sorterRow.html",'<tr> <th title="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" ng-class="{ \'sortable\': $column.sortable(this), \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\', \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\' }" ng-click="sortBy($column, $event)" ng-if="$column.show(this)" ng-init="template=$column.headerTemplateURL(this)" class="header {{$column.class(this)}}"> <div ng-if="!template" class="ng-table-header" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'div\'}"> <span ng-bind="$column.title(this)" ng-class="{\'sort-indicator\': params.settings().sortingIndicator==\'span\'}"></span> </div> <div ng-if="template" ng-include="template"></div> </th> </tr> ')}]),e});